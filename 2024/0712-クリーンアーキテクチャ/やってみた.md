# 作る

- 内側からやっていく

## Enterprise Business Rules

### internal/domain:

- entity（エンティティ）
  - 自分が思っていた `model` みたいなの
  - `struct` 使うアレ
  - `Protobuf` 使うから不要
- repository（リポジトリインターフェース）
  - CRUD操作のインターフェース定義？
  - DBに対する操作？
  - ポジトリがデータの永続化処理を担当するだけであり、ビジネスロジックを含まない
  - SelectUserByID みたいなやつじゃない限り error しか返さない
  - 抽象的な〇〇機能まとめ が 〇〇repo
    - 〇〇が抽象的で，インターフェースを満たす実装が具体的な〇〇
    - https://qiita.com/iTakahiro/items/353a11f6c9d2a927158d
    - https://zenn.dev/awarefy/articles/fb380a4c9230b6

> 1. なぜ CreateUser の返り値が異なるのか？
>    リポジトリインターフェース（internal/domain/repository/user.go）の CreateUser メソッドが error のみを返すのは、リポジトリがデータの永続化処理を担当するだけであり、ビジネスロジックを含まないためです。リポジトリはデータベースとのやり取りに専念し、結果としてのエンティティを返す必要はありません。

## Application Business Rules (use case)

### internal/app/service:

- Newしたときに欲しい操作？
- ビジネスロジックを実行
- ポジトリから得られた情報をクライアントに返す
  - だから User とかの entity と error を返す
- UUIDもここ

## Interface Adapters

### internal/app/handler:

- schema
  - APIやDBでのデータの入出力をするときの形式

ここにはHTTPハンドラが含まれており、外部からの入力を受け取り、アプリケーションビジネスルールとやり取りする部分です。

### internal/app/repository:

データアクセス層であり、データベースとのやり取りを行います。

### internal/app/handler/schema:

データのスキーマを定義しており、データの構造を外部システムとやり取りするためのアダプターです。

## Frameworks & Drivers

### cmd:

main.goが含まれており、アプリケーションのエントリーポイントです。アプリケーションの起動や初期設定を行います。

### docker:

Dockerfileが含まれており、アプリケーションのデプロイや環境設定を行います。

### pkg:

各種ユーティリティ（config, db, errors, firebase, handler, log, middlewareなど）が含まれています。これらはアプリケーションの外部インフラストラクチャやライブラリとのやり取りを担当します。

# 参考文献

- 1: [Clean Architecture で実装するときに知っておきたかったこと - Carpe Diem](https://christina04.hatenablog.com/entry/go-clean-architecture)
- 2: [0から分かるクリーンアーキテクチャ（概要編）｜フロントエンド \_ asunaroblog](https://asunaroblog.net/blog/652eb974374d5bf5084661c5)

## 未使用

- https://gist.github.com/mpppk/609d592f25cab9312654b39f1b357c60
- https://qiita.com/mooooroi/items/f5f4c620bd61dd0a6ac8
