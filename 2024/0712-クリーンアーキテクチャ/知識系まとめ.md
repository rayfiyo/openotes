# The Clean Architecture

一番有名な図．正解は無く，あくまでも一例．

- Enterprise Business Rules
- Application Business Rules
- Interface Adapters
- Frameworks & Drivers

# 文献[1]

## ４つの誤解[1]

- Controller，UseCase．Entityに分離しろ**ではない**
- レイヤーを４つに分割しろ**ではない**
- データや処理の流れを一方通行にしろ**ではない**
- Presentationを古典的なMVCのように設計しろ**ではない**

## 大事なこと[1]

- **依存性は外から中だけ**に向かう

---

# 文献[2]

## ３層アーキテクチャ

- プレゼンテーション層: 見た目の提示（プレゼン）
- （ビジネス）ロジック層: ロジック
  - プレゼンテーション層からの入力を整形などのドメインオブジェクトとは直接関係しないロジックを扱う
- データアクセス層: データ

サーバを分離ではなく，設計の粒度を分離

### 例

- プレゼンテーション層: Webサーバ
- ビジネスロジック層: アプリケーション（API）サーバ
- データアクセス層: DBサーバ

## ドメイン駆動設計（DDD）

ドメイン: サービス領域のルール・概念・ロジック のこと．

３層アーキテクチャの（ビジネス）ロジックを，ビジネスロジックとドメインロジック分割する．

### 誕生の背景（予想）

- プレゼンテーション層とビジネスロジック層の境界がわかりにくい
- ビジネスロジック層の肥大化
- ドメインオブジェクト（entity とも言う？）

  - 商品
  - カート
  - ユーザー

- 分類が分からないよねの例

  - カートに追加
  - 注文の計算（送料や税金の計算など）
  - 在庫の管理
  - 特定のブランドやカテゴリーに基づく推薦ロジック

- 分け方１: 必要な知識で分ける

  - ビジネスロジック
    - カートに追加
    - 注文の計算
  - ドメインロジック
    - 在庫の管理
    - 特定のブランドやカテゴリーに基づく推薦ロジック

- 分け方２: ドメインオブジェクトと直接関係するかで分ける
  - ビジネスロジック
  - ドメインロジック

---

# 参考文献

- 1: [世界一わかりやすいClean Architecture - nuits.jp blog](https://www.nuits.jp/entry/easiest-clean-architecture-2019-09)
- 2: [0から分かるクリーンアーキテクチャ（概要編）｜フロントエンド \_ asunaroblog](https://asunaroblog.net/blog/652eb974374d5bf5084661c5)
